#!/bin/bash

# è‡ªåŠ¨å‘å¸ƒè„šæœ¬
# åŠŸèƒ½ï¼šç‰ˆæœ¬å‡çº§ã€æ¨é€ä»£ç ã€å‘å¸ƒåˆ°npm

set -e  # é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º

echo "ğŸš€ å¼€å§‹å‘å¸ƒæµç¨‹..."

# 1. å‡çº§ç‰ˆæœ¬
echo "ğŸ“¦ å‡çº§ç‰ˆæœ¬..."
npm version patch

# 2. æ¨é€ä»£ç å’Œæ ‡ç­¾
echo "ğŸ”„ æ¨é€ä»£ç å’Œæ ‡ç­¾..."
git push --follow-tags

# 3. å‘å¸ƒåˆ°npm
echo "ğŸ“¤ å‘å¸ƒåˆ°npm..."
npm publish --access public

echo "âœ… å‘å¸ƒå®Œæˆï¼"